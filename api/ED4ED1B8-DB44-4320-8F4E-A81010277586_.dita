<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "file:///C:/InfoShare/Web/Author/ASP/DocTypes/dita-oasis/1.2/technicalContent/dtd/reference.dtd">
<reference id="GUID-ED4ED1B8-DB44-4320-8F4E-A81010277586" xml:lang="en" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
  <title id="GUID-EA82D1DF-CCBC-4C3B-AB89-ECC1707C992B">EnableEncryptionAtRest</title>
  <shortdesc>You can use the <apiname>EnableEncryptionAtRest</apiname> method to enable the Advanced Encryption Standard (AES) 256-bit encryption at rest  on the cluster so that the cluster can manage the encryption key used for the drives on each node. This feature is not enabled by default. </shortdesc>
  <prolog>
    <metadata>
      <keywords>
        <keyword>encryption</keyword>
        <keyword>enable</keyword>
        <keyword>enabling</keyword>
        <keyword>EnableEncryptionAtRest</keyword>
      </keywords>
    </metadata>
  </prolog>
  <refbody>
    <section id="GUID-BD7134AC-BA3D-4C73-A55E-E07E5AE863C5">
      <p>When you enable Encryption at Rest, the cluster automatically manages encryption keys internally for the drives on each node in the cluster. Nodes do not store the keys to unlock drives and the keys are never passed over the network. Two nodes participating in a cluster are required to access the key to disable encryption on a drive. The encryption management does not affect performance or efficiency on the cluster. If an encryption-enabled drive or node is removed from the cluster with the API, Encryption at Rest is disabled and the data is not secure erased. Data can be secure erased using the <apiname>SecureEraseDrives</apiname> API method.</p>
      <p>If a keyProviderID is specified, the password is generated and retrieved according to the type of key provider. This is usually done using a Key Management Interoperability Protocol (KMIP) key server in the case of a KMIP key provider. After this operation, the specified provider is considered active and cannot be deleted until Encryption at Rest is disabled using the <apiname>DisableEncryptionAtRest</apiname> method.</p>
      <note id="GUID-7B32F806-9597-4E54-9AA5-D0565F932D0E">If you have a node type with a model number ending in "-NE", the <apiname>EnableEncryptionAtRest</apiname> method call will fail with a response of "Encryption not allowed. Cluster detected non-encryptable node".</note>
      <note id="GUID-0D2468E8-E7CF-4A98-95E1-589DC8A2D95C">You should only enable or disable encryption when the cluster is running and in a healthy state. You can enable or disable encryption at your discretion and as often as you need.</note>
      <note id="GUID-96B5AC96-F493-428E-AE96-ED6658D28735">This process is asynchronous and returns a response before encryption is enabled. You can use the <apiname>GetClusterInfo</apiname> method to poll the system to see when the process has completed.</note>
    </section>
    <section id="GUID-FDCAAD72-5373-4FAE-AB79-1803C27789E1">
      <title id="GUID-4AD88036-4DA7-48C4-8C6B-7D48E4276322">Parameters</title>
      <p>This method has the following input parameters:</p>
      <table id="TABLE_8CFB1A7A8CAB40789B59BEAEC1A46AB2">
        <tgroup cols="5">
          <colspec colname="col1" colnum="1" colwidth="1.75*" />
          <colspec colname="col2" colnum="2" colwidth="1.40*" />
          <colspec colname="col3" colnum="3" colwidth="1.00*" />
          <colspec colname="col4" colnum="4" colwidth="1.27*" />
          <colspec colname="col5" colnum="5" colwidth="1.16*" />
          <thead>
            <row>
              <entry colname="col1">Name</entry>
              <entry colname="col2">Description</entry>
              <entry colname="col3">Type</entry>
              <entry colname="col4">Default value </entry>
              <entry colname="col5">Required </entry>
            </row>
          </thead>
          <tbody>
            <row>
              <entry colname="col1">
                <parmname>keyProviderID</parmname>
              </entry>
              <entry colname="col2">The ID of a KMIP key provider to use. </entry>
              <entry colname="col3">integer</entry>
              <entry colname="col4">None</entry>
              <entry colname="col5">No</entry>
            </row>
          </tbody>
        </tgroup>
      </table>
    </section>
    <section id="SECTION_57AB0E5059EF41C2ABD5AC9AB7F1A2F2">
      <title id="GUID-D537362C-01B9-48AD-9193-607AB2FB4349">Return values</title>
      <p>This method has no return values.</p>
    </section>
    <section id="SECTION_5FA684D774104B22989CD3F451C07008">
      <title id="GUID-E7471790-2316-4CCD-A290-0A13743927C8">Request example</title>
      <p>Requests for this method are similar to the following example: </p>
      <codeblock xml:space="preserve">{
   "method": "EnableEncryptionAtRest",
   "params": {},
   "id": 1
}</codeblock>
    </section>
    <section id="SECTION_BD5D8DCA54094AAE99A91526F00198BA">
      <title id="GUID-A6B1D1CD-41DE-43CF-AFB9-F0D31155763E">Response examples</title>
      <p>This method returns a response similar to the following example from the <apiname>EnableEncryptionAtRest</apiname> method. There is no result to report. </p>
      <codeblock xml:space="preserve">{
   "id": 1,
   "result": {}
}</codeblock>
      <p>While Encryption At Rest is being enabled on a cluster, <apiname>GetClusterInfo</apiname> returns a result describing the state of Encryption at Rest ("encryptionAtRestState") as "enabling". After Encryption at Rest is fully enabled, the returned state changes to "enabled".</p>
      <codeblock xml:space="preserve">{
   "id": 1,
      "result": {
         "clusterInfo": {
            "attributes": { },
               "encryptionAtRestState": "enabling",
            "ensemble": [
               "10.10.5.94",
               "10.10.5.107",
               "10.10.5.108"
            ],
            "mvip": "192.168.138.209",
            "mvipNodeID": 1,
            "name": "Marshall",
            "repCount": 2,
            "svip": "10.10.7.209",
            "svipNodeID": 1,
            "uniqueID": "91dt"
      }
   }
}</codeblock>
    </section>
    <section id="GUID-50C15081-1B2A-4365-84A7-70C18F288DBA">
      <title id="GUID-00909530-4E03-4494-A098-506845042203">New since version</title>
      <p>9.6</p>
    </section>
  </refbody>
</reference>