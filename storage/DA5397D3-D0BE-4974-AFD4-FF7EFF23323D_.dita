<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "file:///C:/InfoShare/Web/Author/ASP/DocTypes/dita-oasis/1.2/technicalContent/dtd/task.dtd">
<task id="GUID-DA5397D3-D0BE-4974-AFD4-FF7EFF23323D" xml:lang="en" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
  <title id="GUID-B23208DA-6EFE-4E14-ABA1-CB3538E79987">Perform a transfer or one-time migration from ONTAP to <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph></title>
  <shortdesc>Typically, when you use SnapMirror for disaster recovery from a SolidFire storage cluster running <ph conref="ISH_variables.dita#variables/NTAP-ELEMENT-SOFTWARE">NetApp Element software</ph>  to ONTAP software,  <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> is the source and ONTAP  the destination. However, in some cases the ONTAP storage system can serve as the source and  <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> as the destination. </shortdesc>
  <prolog>
    <metadata>
      <keywords />
    </metadata>
  </prolog>
  <taskbody>
    <prereq id="GUID-C892DEC5-34DA-47D0-95B3-563749497F38">
      <ul id="GUID-97C63FBE-2CEB-44DC-A3E6-5A878D3BF8F1">
        <li>Two scenarios exist: <ul id="GUID-C8BEBE7F-F2FD-49D2-A818-5849A23A7C3A"><li>No previous disaster recovery relationship exists. Follow all the steps in this procedure. </li><li>Previous disaster recovery relationship does exist, but not between the volumes being used for this mitigation. In this case, follow only steps 3 and 4 below. </li></ul></li>
        <li>The <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> destination node must have been made accessible to ONTAP. </li>
        <li>The <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> volume must have been enabled for SnapMirror replication. </li>
      </ul>
    </prereq>
    <context id="GUID-E03DB76E-F864-4B2E-9A72-C2596C48C7EF">
      <p>You must specify the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> destination path in the form <cmdname>hostip:/lun/&lt;id_number&gt;</cmdname>, where lun is the actual string “lun” and <cmdname>id_number</cmdname> is the ID of the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> volume.</p>
    </context>
    <steps id="GUID-9B329382-7819-42DB-9FA5-41A9F16CDDE0">
      <step id="STEP_92782CE708B54190BA66BF43D46CBAF0">
        <cmd>Using ONTAP, create the relationship with the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> cluster:  </cmd>
        <info>
          <screen xml:space="preserve">snapmirror create -source-path SVM:volume|cluster://SVM/volume 
-destination-path hostip:/lun/name -type XDP -schedule schedule -policy
    policy</screen>
        </info>
        <stepxmp>
          <screen xml:space="preserve">cluster_dst::&gt; snapmirror create -source-path svm_1:volA_dst 
-destination-path 10.0.0.11:/lun/0005 -type XDP -schedule my_daily -policy MirrorLatest</screen>
        </stepxmp>
      </step>
      <step>
        <cmd>Verify that the SnapMirror relationship was created by using the ONTAP <cmdname>snapmirror show</cmdname> command. </cmd>
        <info>
          <p>See information about creating a replication relationship in the ONTAP documentation and for complete command syntax, see the ONTAP man page. </p>
          <p>
            <xref />
          </p>
        </info>
      </step>
      <step id="STEP_09305AB30E9A4D1497F875EE851C8179">
        <cmd>Using the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph><cmdname>CreateVolume</cmdname> API, create the target volume and set the target volume access mode to SnapMirror: </cmd>
        <stepxmp>Create an <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> volume using the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> API<screen xml:space="preserve">{
   "method": "CreateVolume",
   "params": {
        "name": "SMTargetVolumeTest2",
        "accountID": 1,
        "totalSize": 100000000000,
        "enable512e": true,
        "attributes": {},
        "qosPolicyID": 1,
        "enableSnapMirrorReplication": true,
        "access": "snapMirrorTarget"
    },
    "id": 1
}</screen></stepxmp>
      </step>
      <step>
        <cmd>Initialize the replication relationship using the ONTAP <cmdname>snapmirror initialize</cmdname> command: </cmd>
        <info>
          <screen xml:space="preserve">snapmirror initialize -source-path hostip:/lun/name 
-destination-path SVM:volume|cluster://SVM/volume</screen>
        </info>
      </step>
    </steps>
  </taskbody>
</task>