<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN" "file:///C:/InfoShare/Web/Author/ASP/DocTypes/dita-oasis/1.2/technicalContent/dtd/task.dtd">
<task id="GUID-52ECBBE4-947B-4664-9B10-933D309C5116" xml:lang="en" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
  <title id="GUID-2A831597-AD25-4BB5-BE3E-A69627819638">Configure Fully Qualified Domain Name web UI
        access</title>
  <shortdesc>NetApp HCI with  <ph conref="ISH_variables.dita#variables/NTAP-ELEMENT-SOFTWARE">NetApp Element software</ph> 12.2 or later enables you to access storage cluster web interfaces using
        the Fully Qualified Domain Name (FQDN). If you want to use the FQDN to access web user
        interfaces such as the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> web UI, per-node UI, or
        management node UI, you must first add a storage cluster setting to identify the FQDN used
        by the cluster. </shortdesc>
  <prolog>
    <metadata>
      <keywords />
    </metadata>
  </prolog>
  <taskbody>
    <prereq id="GUID-2A4D3FE2-6EA4-45DD-AE2B-B4C40A55139F">
      <ul id="GUID-E4F57448-585D-49D4-B55E-221EFBA053A7">
        <li>This feature requires <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> 12.2 or later and
                    management services version 2.15 or later.</li>
        <li>To use REST APIs, you must have deployed a management node running version 11.5
                    or later.</li>
      </ul>
    </prereq>
    <context id="GUID-5A6C4BE1-EAD9-4A93-A068-4A9B4081CDA1">
      <p>This process enables the cluster to properly redirect a login session and improves
                integration with external services such as key managers and identity providers for
                multi-factor authentication.</p>
    </context>
    <steps id="GUID-870BB772-D832-415A-910D-4B37F6B4363C">
      <step>
        <cmd>Ensure that the <ph conref="ISH_variables.dita#variables/ELEMENT-SHORT">Element</ph> storage nodes and the
                    mNode have DNS configured correctly for the network environment so that FQDNs in
                    the environment can be resolved. To set DNS, go to the per-node UI for storage
                    nodes and to the management node, then select
                    <menucascade><uicontrol>Network Settings</uicontrol><uicontrol>Management Network</uicontrol></menucascade>.</cmd>
        <substeps id="GUID-3690486D-1AC4-4AB1-9DF9-F44151052B9B">
          <substep>
            <cmd>Per-node UI for storage nodes:
                                <codeph>https://&lt;storage_node_management_IP&gt;:442</codeph></cmd>
          </substep>
          <substep>
            <cmd>Per-node UI for the management node:
                                <codeph>https://&lt;management_node_IP&gt;:442</codeph></cmd>
          </substep>
        </substeps>
      </step>
      <step>
        <cmd>Access the Element API and create the following cluster interface preference
                    using the <codeph>CreateClusterInterfacePreference</codeph> API method,
                    inserting the cluster MVIP FQDN for the preference value:</cmd>
        <info>
          <ul id="GUID-5438A943-4A90-403E-8C27-9BE869873CEC">
            <li>Name: <codeph>mvip_fqdn</codeph></li>
            <li>Value: &lt;Fully Qualified Domain Name for the Cluster MVIP&gt;</li>
          </ul>
        </info>
        <stepxmp>Example where FQDN=storagecluster.my.org
                    <screen xml:space="preserve">https://<varname>&lt;Cluster_MVIP&gt;</varname>/json-rpc/12.2?
method=CreateClusterInterfacePreference&amp;name=mvip_fqdn&amp;value=storagecluster.my.org </screen></stepxmp>
        <info>
          <p>
            <xref href="https://docs.netapp.com/sfe-122/topic/com.netapp.doc.sfe-api/GUID-D10750FA-F83E-43C2-A44D-4125D3719CA4.html" scope="external" format="html">About the NetApp Element
                            API</xref>
          </p>
        </info>
      </step>
      <step>
        <cmd>Change the management node settings using the REST API on the management
                    node:</cmd>
        <substeps id="GUID-BC43FC02-11A6-4A58-A931-B21F2A3151E5">
          <substep>
            <cmd>Access the REST API UI for the management node by entering the
                            management node IP address followed by <codeph>/mnode/2/</codeph></cmd>
            <info>
              <p>For example:
                                </p>
              <codeph>https://&lt;management_node_IP&gt;/mnode/2/</codeph>
            </info>
          </substep>
          <substep>
            <cmd>Click <uicontrol>Authorize</uicontrol> or any lock icon and enter the
                            cluster user name and password.</cmd>
          </substep>
          <substep>
            <cmd>Enter the client ID as <codeph>mnode-client</codeph>. </cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>Authorize</uicontrol> to begin the session and then
                            close the window. </cmd>
          </substep>
          <substep>
            <cmd>From the server list, select <codeph>mnode2</codeph>. </cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>GET /settings</uicontrol>.</cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>Try it out</uicontrol>. </cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>Execute</uicontrol>.</cmd>
          </substep>
          <substep>
            <cmd>Record any proxy settings reported in the response body.</cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>PUT/setttings</uicontrol>. </cmd>
          </substep>
          <substep>
            <cmd>Click <uicontrol>Try it out</uicontrol>. </cmd>
          </substep>
          <substep>
            <cmd>In the request body area, enter the management node FQDN as the value
                            for the <codeph>mnode_fqdn</codeph> parameter.</cmd>
          </substep>
          <substep>
            <cmd>Enter any proxy setting values you recorded earlier in the remaining
                            parameters in the request body. If you leave the proxy parameters empty
                            or do not include them in the request body, existing proxy settings will
                            be removed.</cmd>
          </substep>
          <substep>
            <cmd>Click <b>Execute</b>.</cmd>
          </substep>
        </substeps>
      </step>
    </steps>
  </taskbody>
</task>